(()=>{var t={913:(t,e,i)=>{var n;void 0===(n=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.isEnvironmentValid=t=>this.environments.includes(t),this.setEnvironment=t=>{t&&this.isEnvironmentValid(t)&&(this.environment=t,t===this.environmentStaging?(this.apiUrl=this.apiUrlStaging,this.eventsUrl=this.eventsUrlStaging):t===this.environmentLocal?(this.apiUrl=this.apiUrlLocal,this.eventsUrl=this.eventsUrlLocal):t===this.environmentProduction&&(this.apiUrl=this.apiUrlProduction,this.eventsUrl=this.eventsUrlProduction))},this.environmentLocal="local",this.environmentStaging="staging",this.environmentProduction="production",this.apiUrl="https://api.tonicpow.com",this.apiUrlLocal="http://localhost:3000",this.apiUrlStaging="https://api.staging.tonicpow.com",this.apiUrlProduction="https://api.tonicpow.com",this.eventsUrl="https://events.tonicpow.com",this.eventsUrlLocal="http://localhost:3002",this.eventsUrlStaging="https://events.staging.tonicpow.com",this.eventsUrlProduction="https://events.tonicpow.com",this.customEnvironment="data-environment",this.environment="",this.environments=[this.environmentLocal,this.environmentStaging,this.environmentProduction],this.maxSessionDays=60,this.sessionName="tncpw_session",this.version="v0.0.8",this.widgetDivClass="tonicpow-widget",this.widgetId="data-widget-id"}}}.apply(e,[i,e]))||(t.exports=n)},242:function(t,e,i){var n,o,s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};n=[i,e,i(913)],void 0===(o=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i=s(i),e.default=class{constructor(t){this.detectWidgetClick=()=>{document.addEventListener("click",(async t=>{if(((t=t||window.event).target||t.srcElement)?.parentElement?.parentElement?.classList?.contains("tonicpow-widget"))try{this.interactionSent=!0,await this.sendEvent("interaction","click")}catch(t){console.error("failed to report interaction: click",t)}}))},this.detectBounce=()=>{window.onbeforeunload=()=>{this.sendEvent("bounce",((new Date).getTime()-this.start).toString())}},this.detectInteraction=()=>{document.addEventListener("mousedown",(async()=>{if(!this.interactionSent)try{await this.sendEvent("interaction","mousedown"),this.interactionSent=!0}catch(t){console.error("failed to report interaction: mousedown",t)}})),document.addEventListener("scroll",(async()=>{if(!this.interactionSent)try{await this.sendEvent("interaction","scroll"),this.interactionSent=!0}catch(t){console.error("failed to report interaction: scroll",t)}})),document.addEventListener("keypress",(async()=>{if(!this.interactionSent)try{await this.sendEvent("interaction","keypress"),this.interactionSent=!0}catch(t){console.error("failed to report interaction: keypress",t)}}))},this.sendEvent=async(t,e)=>{if(!this.sessionId)return void console.info("you must call init with a session before sending events");let n=new i.default;await fetch(`${n.eventsUrl}/v1/events?v=${n.version}&name=${t}&tncpw_session=${this.sessionId}&data=${e}`,{method:"get"})},this.sessionId=t,this.interactionSent=!1,this.start=(new Date).getTime(),this.detectInteraction(),this.detectBounce(),this.detectWidgetClick()}}}.apply(e,n))||(t.exports=o)},607:function(t,e,i){var n,o,s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};n=[i,e,i(913),i(242),i(912)],void 0===(o=function(t,e,i,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i=s(i),n=s(n),o=s(o);const r={AutoInit:!0,WidgetRequestCallback:t=>{}};class a{constructor(t=r){this.registerEvents=()=>{if(!this.events){let t=this.getVisitorSession();t&&(console.log("registering session",t),this.events=new n.default(t))}},this.setOreo=(t,e,i)=>{const n=new Date;n.setTime(n.getTime()+864e5*i),document.cookie=`${t}=${e};path=/;expires=${n.toUTCString()}`},this.captureVisitorSession=(t="")=>{let e=t;return t&&t.length||"undefined"==typeof window||(e=new URLSearchParams(window.location.search).get(this.config.sessionName)||""),e&&e.length>0?(this.setOreo(this.config.sessionName,e,this.config.maxSessionDays),this.storage.setStorage(this.config.sessionName,e,86400*this.config.maxSessionDays),e):null},this.getVisitorSession=()=>this.storage.getStorage(this.config.sessionName),this.loadDivs=async()=>{const t=document.getElementsByClassName(this.config.widgetDivClass);for(let e=t.length-1;e>=0;e--){const i=t[e],n=i.getAttribute(this.config.widgetId);if(!n){console.log(`${n} not found`);continue}const o=i.getAttribute(this.config.customEnvironment);this.config.setEnvironment(o||"production");const s=await fetch(`${this.config.apiUrl}/v1/widgets/display/${n}?provider=embed-${this.config.version}`),r=await s.json();console.log("firing callback"),this.options.WidgetRequestCallback(r);const a=encodeURIComponent(r.title);i.innerHTML=`\n    <a href="${r.link_url}?utm_source=tonicpow-widgets&utm_medium=widget&utm_campaign=${n}&utm_content=${a}" style="display: block">\n      <img src="${r.image_url}" \n      id="${n}"\n      width="${r.width}" \n      height="${r.height}" \n      alt="${r.title}" />\n    </a>`,i.setAttribute("data-width",r.width),i.setAttribute("data-height",r.height)}},this.load=()=>{if("undefined"==typeof window)return void console.error("TonicPow embed only works in the browser");const t=document.getElementsByClassName(this.config.widgetDivClass);t&&t.length>0&&this.loadDivs().then((()=>{console.log("TonicPow widget(s) loaded!")}));const e=this.captureVisitorSession();e&&(this.events=new n.default(e))},this.options=t;for(let[e,i]of Object.entries(t))Object.defineProperty(this.options,e,{value:i,writable:!1});console.log("constructed",this),this.config=new i.default,this.storage=new o.default,this.options.AutoInit&&("complete"===document.readyState||"interactive"===document.readyState?(this.load(),this.registerEvents()):document.addEventListener("DOMContentLoaded",(()=>{this.load(),this.registerEvents()})))}}e.default=a,window.TonicPow=a||{}}.apply(e,n))||(t.exports=o)},912:(t,e,i)=>{var n;void 0===(n=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.removeStorage=t=>{try{localStorage.removeItem(t),localStorage.removeItem(`${t}_expiresIn`)}catch(e){return console.log(`removeStorage: Error removing key [${t}] from localStorage: ${JSON.stringify(e)}`),!1}return!0},this.getStorage=t=>{const e=Date.now();let i;try{i=localStorage.getItem(`${t}_expires`)}catch(t){return console.log(`getItem: error getting localStorage: ${JSON.stringify(t)}`),null}if(null==i&&(i=0),i<e)return this.removeStorage(t),null;try{return localStorage.getItem(t)}catch(e){return console.log(`getStorage: Error reading key [${t}] from localStorage: ${JSON.stringify(e)}`),null}},this.setStorage=(t,e,i=null)=>{i=i?Math.abs(i):86400;const n=Date.now()+1e3*i;try{localStorage.setItem(t,e),localStorage.setItem(`${t}_expires`,n.toString())}catch(e){return console.log(`setStorage: Error setting key [${t}] in localStorage: ${JSON.stringify(e)}`),!1}return!0}}}}.apply(e,[i,e]))||(t.exports=n)}},e={};!function i(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AdG9uaWNwb3cvd2lkZ2V0Ly4vc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly9AdG9uaWNwb3cvd2lkZ2V0Ly4vc3JjL2V2ZW50cy50cyIsIndlYnBhY2s6Ly9AdG9uaWNwb3cvd2lkZ2V0Ly4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL0B0b25pY3Bvdy93aWRnZXQvLi9zcmMvc3RvcmFnZS50cyIsIndlYnBhY2s6Ly9AdG9uaWNwb3cvd2lkZ2V0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0B0b25pY3Bvdy93aWRnZXQvd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbImlzRW52aXJvbm1lbnRWYWxpZCIsImVudmlyb25tZW50IiwidGhpcyIsImVudmlyb25tZW50cyIsImluY2x1ZGVzIiwic2V0RW52aXJvbm1lbnQiLCJlbnZpcm9ubWVudFN0YWdpbmciLCJhcGlVcmwiLCJhcGlVcmxTdGFnaW5nIiwiZXZlbnRzVXJsIiwiZXZlbnRzVXJsU3RhZ2luZyIsImVudmlyb25tZW50TG9jYWwiLCJhcGlVcmxMb2NhbCIsImV2ZW50c1VybExvY2FsIiwiZW52aXJvbm1lbnRQcm9kdWN0aW9uIiwiYXBpVXJsUHJvZHVjdGlvbiIsImV2ZW50c1VybFByb2R1Y3Rpb24iLCJjdXN0b21FbnZpcm9ubWVudCIsIm1heFNlc3Npb25EYXlzIiwic2Vzc2lvbk5hbWUiLCJ2ZXJzaW9uIiwid2lkZ2V0RGl2Q2xhc3MiLCJ3aWRnZXRJZCIsInNlc3Npb25JZCIsImRldGVjdFdpZGdldENsaWNrIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiYXN5bmMiLCJlIiwid2luZG93IiwiZXZlbnQiLCJ0YXJnZXQiLCJzcmNFbGVtZW50IiwicGFyZW50RWxlbWVudCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiaW50ZXJhY3Rpb25TZW50Iiwic2VuZEV2ZW50IiwiY29uc29sZSIsImVycm9yIiwiZGV0ZWN0Qm91bmNlIiwib25iZWZvcmV1bmxvYWQiLCJEYXRlIiwiZ2V0VGltZSIsInN0YXJ0IiwidG9TdHJpbmciLCJkZXRlY3RJbnRlcmFjdGlvbiIsImV2ZW50TmFtZSIsImRhdGEiLCJpbmZvIiwiY29uZmlnIiwiZmV0Y2giLCJtZXRob2QiLCJkZWZhdWx0T3B0aW9ucyIsIkF1dG9Jbml0IiwiV2lkZ2V0UmVxdWVzdENhbGxiYWNrIiwid2lkZ2V0IiwiVG9uaWNQb3ciLCJvcHRpb25zIiwicmVnaXN0ZXJFdmVudHMiLCJldmVudHMiLCJzZXNzaW9uIiwiZ2V0VmlzaXRvclNlc3Npb24iLCJsb2ciLCJzZXRPcmVvIiwibmFtZSIsInZhbHVlIiwiZGF5cyIsImRhdGUiLCJzZXRUaW1lIiwiY29va2llIiwidG9VVENTdHJpbmciLCJjYXB0dXJlVmlzaXRvclNlc3Npb24iLCJjdXN0b21TZXNzaW9uSWQiLCJsZW5ndGgiLCJVUkxTZWFyY2hQYXJhbXMiLCJsb2NhdGlvbiIsInNlYXJjaCIsImdldCIsInN0b3JhZ2UiLCJzZXRTdG9yYWdlIiwiZ2V0U3RvcmFnZSIsImxvYWREaXZzIiwidG9uaWNEaXZzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImkiLCJ0b25pY0RpdiIsImdldEF0dHJpYnV0ZSIsInByb21pc2UiLCJyZXNwb25zZSIsImpzb24iLCJjYW1wYWlnblRpdGxlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidGl0bGUiLCJpbm5lckhUTUwiLCJsaW5rX3VybCIsImltYWdlX3VybCIsIndpZHRoIiwiaGVpZ2h0Iiwic2V0QXR0cmlidXRlIiwibG9hZCIsInRoZW4iLCJvcHRpb25LZXkiLCJvcHRpb25WYWwiLCJPYmplY3QiLCJlbnRyaWVzIiwiZGVmaW5lUHJvcGVydHkiLCJ3cml0YWJsZSIsInJlYWR5U3RhdGUiLCJyZW1vdmVTdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwicmVtb3ZlSXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJrZXkiLCJub3ciLCJleHBpcmVzIiwiZ2V0SXRlbSIsIk1hdGgiLCJhYnMiLCJzY2hlZHVsZSIsInNldEl0ZW0iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiXSwibWFwcGluZ3MiOiJ5SEFBQSxnQkFxQkUsY0F3QkEsS0FBQUEsbUJBQXNCQyxHQUF3QkMsS0FBS0MsYUFBYUMsU0FBU0gsR0FHekUsS0FBQUksZUFBa0JKLElBRVhBLEdBS0FDLEtBQUtGLG1CQUFtQkMsS0FLN0JDLEtBQUtELFlBQWNBLEVBR2ZBLElBQWdCQyxLQUFLSSxvQkFDdkJKLEtBQUtLLE9BQVNMLEtBQUtNLGNBQ25CTixLQUFLTyxVQUFZUCxLQUFLUSxrQkFDYlQsSUFBZ0JDLEtBQUtTLGtCQUM5QlQsS0FBS0ssT0FBU0wsS0FBS1UsWUFDbkJWLEtBQUtPLFVBQVlQLEtBQUtXLGdCQUNiWixJQUFnQkMsS0FBS1ksd0JBQzlCWixLQUFLSyxPQUFTTCxLQUFLYSxpQkFDbkJiLEtBQUtPLFVBQVlQLEtBQUtjLHVCQWpEeEJkLEtBQUtTLGlCQUFtQixRQUN4QlQsS0FBS0ksbUJBQXFCLFVBQzFCSixLQUFLWSxzQkFBd0IsYUFFN0JaLEtBQUtLLE9BQVMsMkJBQ2RMLEtBQUtVLFlBQWMsd0JBQ25CVixLQUFLTSxjQUFnQixtQ0FDckJOLEtBQUthLGlCQUFtQiwyQkFDeEJiLEtBQUtPLFVBQVksOEJBQ2pCUCxLQUFLVyxlQUFpQix3QkFDdEJYLEtBQUtRLGlCQUFtQixzQ0FDeEJSLEtBQUtjLG9CQUFzQiw4QkFDM0JkLEtBQUtlLGtCQUFvQixtQkFDekJmLEtBQUtELFlBQWMsR0FDbkJDLEtBQUtDLGFBQWUsQ0FBQ0QsS0FBS1MsaUJBQWtCVCxLQUFLSSxtQkFBb0JKLEtBQUtZLHVCQUMxRVosS0FBS2dCLGVBQWlCLEdBQ3RCaEIsS0FBS2lCLFlBQWMsZ0JBQ25CakIsS0FBS2tCLFFBQVUsU0FDZmxCLEtBQUttQixlQUFpQixrQkFDdEJuQixLQUFLb0IsU0FBVyxvQiw0UEN2Q3BCLGdCQUtFLFlB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ckYsTUFDakYsT0FhWCxLQUFBb0QsV0FBYSxDQUFDa0MsRUFBYWhELEVBQWVrRCxFQUF5QixRQUcvREEsRUFERUEsRUFDUUUsS0FBS0MsSUFBSUgsR0FFVCxNQUlaLE1BQ01JLEVBRE05RSxLQUFLeUUsTUFDZ0IsSUFBVkMsRUFDdkIsSUFDRU4sYUFBYVcsUUFBUVAsRUFBS2hELEdBQzFCNEMsYUFBYVcsUUFBUSxHQUFHUCxZQUFlTSxFQUFTM0UsWUFDaEQsTUFBT2pCLEdBRVAsT0FEQVUsUUFBUXlCLElBQUksa0NBQWtDbUQsdUJBQXlCRixLQUFLQyxVQUFVckYsT0FDL0UsRUFFVCxPQUFPLE0saUNDMUZQOEYsRUFBMkIsSUFHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLEdBQUdGLEVBQXlCRSxHQUMzQixPQUFPRixFQUF5QkUsR0FBVUMsUUFHM0MsSUFBSUMsRUFBU0osRUFBeUJFLEdBQVksQ0FHakRDLFFBQVMsSUFPVixPQUhBRSxFQUFvQkgsR0FBVUksS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHcEVHLEVBQU9ELFFDakJXRixDQUFvQixNIiwiZmlsZSI6InRvbmljcG93LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uZmlnIHtcclxuICBlbnZpcm9ubWVudExvY2FsOiBzdHJpbmdcclxuICBlbnZpcm9ubWVudFN0YWdpbmc6IHN0cmluZ1xyXG4gIGVudmlyb25tZW50UHJvZHVjdGlvbjogc3RyaW5nXHJcbiAgYXBpVXJsOiBzdHJpbmdcclxuICBhcGlVcmxMb2NhbDogc3RyaW5nXHJcbiAgYXBpVXJsU3RhZ2luZzogc3RyaW5nXHJcbiAgYXBpVXJsUHJvZHVjdGlvbjogc3RyaW5nXHJcbiAgZXZlbnRzVXJsOiBzdHJpbmdcclxuICBldmVudHNVcmxMb2NhbDogc3RyaW5nXHJcbiAgZXZlbnRzVXJsU3RhZ2luZzogc3RyaW5nXHJcbiAgZXZlbnRzVXJsUHJvZHVjdGlvbjogc3RyaW5nXHJcbiAgY3VzdG9tRW52aXJvbm1lbnQ6IHN0cmluZ1xyXG4gIGVudmlyb25tZW50OiBzdHJpbmdcclxuICBlbnZpcm9ubWVudHM6IHN0cmluZ1tdXHJcbiAgbWF4U2Vzc2lvbkRheXM6IG51bWJlclxyXG4gIHNlc3Npb25OYW1lOiBzdHJpbmdcclxuICB2ZXJzaW9uOiBzdHJpbmdcclxuICB3aWRnZXREaXZDbGFzczogc3RyaW5nXHJcbiAgd2lkZ2V0SWQ6IHN0cmluZ1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZW52aXJvbm1lbnRMb2NhbCA9ICdsb2NhbCdcclxuICAgIHRoaXMuZW52aXJvbm1lbnRTdGFnaW5nID0gJ3N0YWdpbmcnXHJcbiAgICB0aGlzLmVudmlyb25tZW50UHJvZHVjdGlvbiA9ICdwcm9kdWN0aW9uJ1xyXG5cclxuICAgIHRoaXMuYXBpVXJsID0gJ2h0dHBzOi8vYXBpLnRvbmljcG93LmNvbSdcclxuICAgIHRoaXMuYXBpVXJsTG9jYWwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwJ1xyXG4gICAgdGhpcy5hcGlVcmxTdGFnaW5nID0gJ2h0dHBzOi8vYXBpLnN0YWdpbmcudG9uaWNwb3cuY29tJ1xyXG4gICAgdGhpcy5hcGlVcmxQcm9kdWN0aW9uID0gJ2h0dHBzOi8vYXBpLnRvbmljcG93LmNvbSdcclxuICAgIHRoaXMuZXZlbnRzVXJsID0gJ2h0dHBzOi8vZXZlbnRzLnRvbmljcG93LmNvbSdcclxuICAgIHRoaXMuZXZlbnRzVXJsTG9jYWwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyJ1xyXG4gICAgdGhpcy5ldmVudHNVcmxTdGFnaW5nID0gJ2h0dHBzOi8vZXZlbnRzLnN0YWdpbmcudG9uaWNwb3cuY29tJ1xyXG4gICAgdGhpcy5ldmVudHNVcmxQcm9kdWN0aW9uID0gJ2h0dHBzOi8vZXZlbnRzLnRvbmljcG93LmNvbSdcclxuICAgIHRoaXMuY3VzdG9tRW52aXJvbm1lbnQgPSAnZGF0YS1lbnZpcm9ubWVudCdcclxuICAgIHRoaXMuZW52aXJvbm1lbnQgPSAnJ1xyXG4gICAgdGhpcy5lbnZpcm9ubWVudHMgPSBbdGhpcy5lbnZpcm9ubWVudExvY2FsLCB0aGlzLmVudmlyb25tZW50U3RhZ2luZywgdGhpcy5lbnZpcm9ubWVudFByb2R1Y3Rpb25dXHJcbiAgICB0aGlzLm1heFNlc3Npb25EYXlzID0gNjBcclxuICAgIHRoaXMuc2Vzc2lvbk5hbWUgPSAndG5jcHdfc2Vzc2lvbidcclxuICAgIHRoaXMudmVyc2lvbiA9ICd2MC4wLjgnXHJcbiAgICB0aGlzLndpZGdldERpdkNsYXNzID0gJ3RvbmljcG93LXdpZGdldCdcclxuICAgIHRoaXMud2lkZ2V0SWQgPSAnZGF0YS13aWRnZXQtaWQnXHJcbiAgfVxyXG5cclxuICAvLyBpc0Vudmlyb25tZW50VmFsaWQgd2lsbCBjaGVjayBpZiB0aGUgZ2l2ZW4gZW52aXJvbm1lbnQgaXMgdmFsaWRcclxuICBpc0Vudmlyb25tZW50VmFsaWQgPSAoZW52aXJvbm1lbnQ6IHN0cmluZykgPT4gdGhpcy5lbnZpcm9ubWVudHMuaW5jbHVkZXMoZW52aXJvbm1lbnQpXHJcblxyXG4gIC8vIHNldEVudmlyb25tZW50IHdpbGwgc2V0IHRoZSBlbnZpcm9ubWVudFxyXG4gIHNldEVudmlyb25tZW50ID0gKGVudmlyb25tZW50OiBzdHJpbmcpID0+IHtcclxuICAgIC8vIE5vIGVudmlyb25tZW50IHNldD8gdXNlIHRoZSBkZWZhdWx0XHJcbiAgICBpZiAoIWVudmlyb25tZW50KSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIE5vdCBhIHZhbGlkIGVudmlyb25tZW50P1xyXG4gICAgaWYgKCF0aGlzLmlzRW52aXJvbm1lbnRWYWxpZChlbnZpcm9ubWVudCkpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IHRoZSBlbnZpcm9ubWVudFxyXG4gICAgdGhpcy5lbnZpcm9ubWVudCA9IGVudmlyb25tZW50XHJcblxyXG4gICAgLy8gU2V0IHRoZSBBUEkgdXJsXHJcbiAgICBpZiAoZW52aXJvbm1lbnQgPT09IHRoaXMuZW52aXJvbm1lbnRTdGFnaW5nKSB7XHJcbiAgICAgIHRoaXMuYXBpVXJsID0gdGhpcy5hcGlVcmxTdGFnaW5nXHJcbiAgICAgIHRoaXMuZXZlbnRzVXJsID0gdGhpcy5ldmVudHNVcmxTdGFnaW5nXHJcbiAgICB9IGVsc2UgaWYgKGVudmlyb25tZW50ID09PSB0aGlzLmVudmlyb25tZW50TG9jYWwpIHtcclxuICAgICAgdGhpcy5hcGlVcmwgPSB0aGlzLmFwaVVybExvY2FsXHJcbiAgICAgIHRoaXMuZXZlbnRzVXJsID0gdGhpcy5ldmVudHNVcmxMb2NhbFxyXG4gICAgfSBlbHNlIGlmIChlbnZpcm9ubWVudCA9PT0gdGhpcy5lbnZpcm9ubWVudFByb2R1Y3Rpb24pIHtcclxuICAgICAgdGhpcy5hcGlVcmwgPSB0aGlzLmFwaVVybFByb2R1Y3Rpb25cclxuICAgICAgdGhpcy5ldmVudHNVcmwgPSB0aGlzLmV2ZW50c1VybFByb2R1Y3Rpb25cclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENvbmZpZyBmcm9tICcuL2NvbmZpZydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50cyB7XHJcbiAgc2Vzc2lvbklkOiBzdHJpbmdcclxuICBzdGFydDogbnVtYmVyXHJcbiAgaW50ZXJhY3Rpb25TZW50OiBib29sZWFuXHJcblxyXG4gIGNvbnN0cnVjdG9yKHNlc3Npb25JZDogc3RyaW5nKSB7XHJcbiAgICAvLyBTZXQgdGhlIGN1cnJlbnQgc2Vzc2lvblxyXG4gICAgdGhpcy5zZXNzaW9uSWQgPSBzZXNzaW9uSWRcclxuXHJcbiAgICB0aGlzLmludGVyYWN0aW9uU2VudCA9IGZhbHNlXHJcblxyXG4gICAgLy8gUmVtZW1iZXIgd2hlbiB3ZSBzdGFydGVkXHJcbiAgICB0aGlzLnN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKClcclxuICAgIHRoaXMuZGV0ZWN0SW50ZXJhY3Rpb24oKVxyXG4gICAgdGhpcy5kZXRlY3RCb3VuY2UoKVxyXG4gICAgdGhpcy5kZXRlY3RXaWRnZXRDbGljaygpXHJcbiAgfVxyXG5cclxuICAvLyBEZXRlY3RzIGNsaWNrIG9uIHRoZSB3aWRnZXRcclxuICBkZXRlY3RXaWRnZXRDbGljayA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGU6IEV2ZW50KSA9PiB7XHJcbiAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudFxyXG4gICAgICB2YXIgdGFyZ2V0ID0gKGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCkgYXMgSFRNTERpdkVsZW1lbnRcclxuICAgICAgLy8gR2V0IGNvbnRhaW5lciBmcm9tIHRoZSBjbGlja2VkIGVsZW1lbnRcclxuICAgICAgbGV0IGNvbnRhaW5lciA9IHRhcmdldD8ucGFyZW50RWxlbWVudD8ucGFyZW50RWxlbWVudFxyXG4gICAgICAvLyBTZW5kIG9ubHkgaWYgd2lkZ2V0IGltYWdlIHdhcyBjbGlja2VkXHJcbiAgICAgIGlmIChjb250YWluZXI/LmNsYXNzTGlzdD8uY29udGFpbnMoJ3RvbmljcG93LXdpZGdldCcpKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIEtlZXBvIHRoaXMgYWJvdmUgc2VuZCB0byBwcmV2ZW50IHNlbmRpbmcgbW91c2Vkb3duIEFORCBjbGljayBvbiBpbml0aWFsIGludGVyYWN0aW9uXHJcbiAgICAgICAgICB0aGlzLmludGVyYWN0aW9uU2VudCA9IHRydWVcclxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZEV2ZW50KCdpbnRlcmFjdGlvbicsICdjbGljaycpXHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignZmFpbGVkIHRvIHJlcG9ydCBpbnRlcmFjdGlvbjogY2xpY2snLCBlKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vIERldGVjdHMgYSBib3VuY2UgZXZlbnRcclxuICBkZXRlY3RCb3VuY2UgPSAoKSA9PiB7XHJcbiAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgIC8vIENhbGN1bGF0ZSB0aW1lIG9uIHBhZ2VcclxuICAgICAgdGhpcy5zZW5kRXZlbnQoJ2JvdW5jZScsIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMuc3RhcnQpLnRvU3RyaW5nKCkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBEZXRlY3RzIGEgcGFnZSBpbnRlcmFjdGlvblxyXG4gIGRldGVjdEludGVyYWN0aW9uID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuaW50ZXJhY3Rpb25TZW50KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZEV2ZW50KCdpbnRlcmFjdGlvbicsICdtb3VzZWRvd24nKVxyXG4gICAgICAgICAgdGhpcy5pbnRlcmFjdGlvblNlbnQgPSB0cnVlXHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignZmFpbGVkIHRvIHJlcG9ydCBpbnRlcmFjdGlvbjogbW91c2Vkb3duJywgZSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuaW50ZXJhY3Rpb25TZW50KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZEV2ZW50KCdpbnRlcmFjdGlvbicsICdzY3JvbGwnKVxyXG4gICAgICAgICAgdGhpcy5pbnRlcmFjdGlvblNlbnQgPSB0cnVlXHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignZmFpbGVkIHRvIHJlcG9ydCBpbnRlcmFjdGlvbjogc2Nyb2xsJywgZSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5pbnRlcmFjdGlvblNlbnQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5zZW5kRXZlbnQoJ2ludGVyYWN0aW9uJywgJ2tleXByZXNzJylcclxuICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25TZW50ID0gdHJ1ZVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2ZhaWxlZCB0byByZXBvcnQgaW50ZXJhY3Rpb246IGtleXByZXNzJywgZSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvLyBTZW5kIGV2ZW50IHdpbGwgc2VuZCBhbiBldmVudCB0byBUb25pY1Bvd1xyXG4gIHNlbmRFdmVudCA9IGFzeW5jIChldmVudE5hbWU6IHN0cmluZywgZGF0YTogc3RyaW5nKSA9PiB7XHJcbiAgICBpZiAoIXRoaXMuc2Vzc2lvbklkKSB7XHJcbiAgICAgIGNvbnNvbGUuaW5mbygneW91IG11c3QgY2FsbCBpbml0IHdpdGggYSBzZXNzaW9uIGJlZm9yZSBzZW5kaW5nIGV2ZW50cycpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBjb25maWdcclxuICAgIGxldCBjb25maWcgPSBuZXcgQ29uZmlnKClcclxuXHJcbiAgICAvLyB0b2RvOiBvYmZ1c2NhdGUgdGhlIHVybCBwYXJhbXMgKGNoYW5nZSB0byBwYXlsb2FkIG9mIEpTT04/KVxyXG4gICAgYXdhaXQgZmV0Y2goXHJcbiAgICAgIGAke2NvbmZpZy5ldmVudHNVcmx9L3YxL2V2ZW50cz92PSR7Y29uZmlnLnZlcnNpb259Jm5hbWU9JHtldmVudE5hbWV9JnRuY3B3X3Nlc3Npb249JHt0aGlzLnNlc3Npb25JZH0mZGF0YT0ke2RhdGF9YCxcclxuICAgICAgeyBtZXRob2Q6ICdnZXQnIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENvbmZpZyBmcm9tICcuL2NvbmZpZydcclxuaW1wb3J0IEV2ZW50cyBmcm9tICcuL2V2ZW50cydcclxuaW1wb3J0IFN0b3JhZ2UgZnJvbSAnLi9zdG9yYWdlJ1xyXG5cclxuLy8gaGVpZ2h0OiAyNTBcclxuLy8gaW1hZ2VfdXJsOiBcImh0dHBzOi8vcmVzLmNsb3VkaW5hcnkuY29tL3RvbmljcG93L2ltYWdlL3VwbG9hZC9jX2Nyb3AseF8wLHlfMCx3XzMwMCxoXzI1MC93XzMwMCxoXzI1MCxjX2xpbWl0LGdfY2VudGVyL3YxNjA2NjIyMjQ4L29jd2tmc2pzYjJoejJvc3R4eWRuLmpwZ1wiXHJcbi8vIGxpbmtfdXJsOiBcImh0dHBzOi8vc3RhZ2luZy50cG93LmFwcC9jMWQwZjhjOVwiXHJcbi8vIHRpdGxlOiBcIlNvbWV0aGluZyBjb29sXCJcclxuLy8gd2lkdGg6IDMwMFxyXG5pbnRlcmZhY2UgV2lkZ2V0IHtcclxuICBoZWlnaHQ6IG51bWJlclxyXG4gIGltYWdlX3VybDogc3RyaW5nXHJcbiAgbGlua191cmw6IHN0cmluZ1xyXG4gIHRpdGxlOiBzdHJpbmdcclxuICB3aWR0aDogbnVtYmVyXHJcbiAgaWQ6IG51bWJlclxyXG59XHJcblxyXG4vLyBPcHRpb25zIHdoZW4gY3JlYXRpbmcgYSBUb25pY1BvdyBpbnN0YW5jZVxyXG5pbnRlcmZhY2UgVG9uaWNQb3dPcHRpb25zIHtcclxuICBBdXRvSW5pdDogYm9vbGVhbiAvLyBNYW51YWxseSBpbml0aWFsaXplIGluc3RlYWQgb2YgYXV0by1kZXRlY3RpbmcgZGl2c1xyXG4gIFdpZGdldFJlcXVlc3RDYWxsYmFjazogKHdpZGdldDogV2lkZ2V0KSA9PiB2b2lkXHJcbn1cclxuXHJcbi8vIERldGF1bHQgb3B0aW9uc1xyXG5jb25zdCBkZWZhdWx0T3B0aW9uczogVG9uaWNQb3dPcHRpb25zID0ge1xyXG4gIEF1dG9Jbml0OiB0cnVlLFxyXG4gIFdpZGdldFJlcXVlc3RDYWxsYmFjazogKHdpZGdldDogV2lkZ2V0KSA9PiB7fSxcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9uaWNQb3cge1xyXG4gIGNvbmZpZzogQ29uZmlnXHJcbiAgc3RvcmFnZTogU3RvcmFnZVxyXG4gIGV2ZW50czogRXZlbnRzIHwgdW5kZWZpbmVkXHJcbiAgb3B0aW9uczogVG9uaWNQb3dPcHRpb25zXHJcblxyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFRvbmljUG93T3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zKSB7XHJcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXHJcblxyXG4gICAgLy8gSW1idWUgb3B0aW9uc1xyXG4gICAgZm9yIChsZXQgW29wdGlvbktleSwgb3B0aW9uVmFsXSBvZiBPYmplY3QuZW50cmllcyhvcHRpb25zKSkge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vcHRpb25zLCBvcHRpb25LZXksIHtcclxuICAgICAgICB2YWx1ZTogb3B0aW9uVmFsLFxyXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnY29uc3RydWN0ZWQnLCB0aGlzKVxyXG5cclxuICAgIC8vIFNldCBuYW1lc3BhY2VzXHJcbiAgICB0aGlzLmNvbmZpZyA9IG5ldyBDb25maWcoKVxyXG4gICAgdGhpcy5zdG9yYWdlID0gbmV3IFN0b3JhZ2UoKVxyXG5cclxuICAgIC8vIFN0YXJ0IHRoZSBUb25pY1BvdyBzZXJ2aWNlIGFuZCBsb2FkIG1vZHVsZXNcclxuICAgIGlmICh0aGlzLm9wdGlvbnMuQXV0b0luaXQpIHtcclxuICAgICAgLy8gTG9hZCB0aGUgVG9uaWNQb3cgd2lkZ2V0XHJcbiAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpIHtcclxuICAgICAgICAvLyBUaGlzIGxvYWRzIGlmIHRoZSA8c2NyaXB0PiBpcyBkeW5hbWljYWxseSBpbmplY3RlZCBpbnRvIHRoZSBwYWdlXHJcbiAgICAgICAgdGhpcy5sb2FkKClcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnRzKClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBUaGlzIGxvYWRzIGlmIHRoZSA8c2NyaXB0PiBpcyBoYXJkY29kZWQgaW4gdGhlIGh0bWwgcGFnZSBpbiB0aGUgPGhlYWQ+XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMubG9hZCgpXHJcbiAgICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnRzKClcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyByZWdpc3RlckV2ZW50cyAtUmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycy4gUnVucyBvbmx5IG9uY2VcclxuICByZWdpc3RlckV2ZW50cyA9ICgpID0+IHtcclxuICAgIGlmICghdGhpcy5ldmVudHMpIHtcclxuICAgICAgLy8gUmVnaXN0ZXIgZXZlbnRzIGlmIHdlIGhhdmUgYSB2YWxpZCBzZXNzaW9uXHJcbiAgICAgIGxldCBzZXNzaW9uID0gdGhpcy5nZXRWaXNpdG9yU2Vzc2lvbigpXHJcbiAgICAgIGlmIChzZXNzaW9uKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3JlZ2lzdGVyaW5nIHNlc3Npb24nLCBzZXNzaW9uKVxyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gbmV3IEV2ZW50cyhzZXNzaW9uKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBzZXRPcmVvIGZvciBjcmVhdGluZyBuZXcgb3Jlb3NcclxuICBzZXRPcmVvID0gKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgZGF5czogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxyXG4gICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgMjQgKiA2MCAqIDYwICogMTAwMCAqIGRheXMpXHJcbiAgICBkb2N1bWVudC5jb29raWUgPSBgJHtuYW1lfT0ke3ZhbHVlfTtwYXRoPS87ZXhwaXJlcz0ke2RhdGUudG9VVENTdHJpbmcoKX1gXHJcbiAgfVxyXG5cclxuICAvLyBjYXB0dXJlVmlzaXRvclNlc3Npb24gd2lsbCBjYXB0dXJlIHRoZSBzZXNzaW9uIGFuZCBzdG9yZSBpdFxyXG4gIC8vIEJ1aWxkcyBhIGNvb2tpZSBzbyBpdCdzIHNlbnQgb24gcmVxdWVzdHMgYXV0b21hdGljYWxseVxyXG4gIC8vIFN0b3JlcyBpbiBsb2NhbCBzdG9yYWdlIGZvciBlYXN5IGFjY2VzcyBmcm9tIHRoZSBhcHBsaWNhdGlvblxyXG4gIGNhcHR1cmVWaXNpdG9yU2Vzc2lvbiA9IChjdXN0b21TZXNzaW9uSWQ6IHN0cmluZyA9ICcnKSA9PiB7XHJcbiAgICBsZXQgc2Vzc2lvbklkID0gY3VzdG9tU2Vzc2lvbklkXHJcblxyXG4gICAgaWYgKCghY3VzdG9tU2Vzc2lvbklkIHx8ICFjdXN0b21TZXNzaW9uSWQubGVuZ3RoKSAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXHJcbiAgICAgIHNlc3Npb25JZCA9IHVybFBhcmFtcy5nZXQodGhpcy5jb25maWcuc2Vzc2lvbk5hbWUpIHx8ICcnXHJcbiAgICB9XHJcbiAgICBpZiAoc2Vzc2lvbklkICYmIHNlc3Npb25JZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuc2V0T3Jlbyh0aGlzLmNvbmZpZy5zZXNzaW9uTmFtZSwgc2Vzc2lvbklkLCB0aGlzLmNvbmZpZy5tYXhTZXNzaW9uRGF5cylcclxuICAgICAgdGhpcy5zdG9yYWdlLnNldFN0b3JhZ2UoXHJcbiAgICAgICAgdGhpcy5jb25maWcuc2Vzc2lvbk5hbWUsXHJcbiAgICAgICAgc2Vzc2lvbklkLFxyXG4gICAgICAgIDI0ICogNjAgKiA2MCAqIHRoaXMuY29uZmlnLm1heFNlc3Npb25EYXlzXHJcbiAgICAgIClcclxuICAgICAgcmV0dXJuIHNlc3Npb25JZFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcblxyXG4gIC8vIGdldFZpc2l0b3JTZXNzaW9uIHdpbGwgZ2V0IHRoZSBzZXNzaW9uIGlmIGl0IGV4aXN0c1xyXG4gIGdldFZpc2l0b3JTZXNzaW9uID0gKCkgPT4gdGhpcy5zdG9yYWdlLmdldFN0b3JhZ2UodGhpcy5jb25maWcuc2Vzc2lvbk5hbWUpXHJcblxyXG4gIC8vIGxvYWREaXZzIHJlcGxhY2VzIGVhY2ggVG9uaWNQb3cgZGl2IHdpdGggYSBjb3JyZXNwb25kaW5nIGVtYmVkIHdpZGdldFxyXG4gIGxvYWREaXZzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gR2V0IGFsbCBkaXZzXHJcbiAgICBjb25zdCB0b25pY0RpdnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHRoaXMuY29uZmlnLndpZGdldERpdkNsYXNzKVxyXG5cclxuICAgIC8vIExvb3AgYWxsIGRpdnMgdGhhdCB3ZSBmb3VuZFxyXG4gICAgZm9yIChsZXQgaSA9IHRvbmljRGl2cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAvLyBTZXQgdGhlIGRpdlxyXG4gICAgICBjb25zdCB0b25pY0RpdiA9IHRvbmljRGl2c1tpXVxyXG5cclxuICAgICAgLy8gR2V0IHRoZSB3aWRnZXQgaWRcclxuICAgICAgY29uc3Qgd2lkZ2V0SWQgPSB0b25pY0Rpdi5nZXRBdHRyaWJ1dGUodGhpcy5jb25maWcud2lkZ2V0SWQpXHJcbiAgICAgIGlmICghd2lkZ2V0SWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgJHt3aWRnZXRJZH0gbm90IGZvdW5kYClcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBHZXQgdGhlIGN1c3RvbSBlbnZpcm9ubWVudCAoc3dpdGNoaW5nIGF3YXkgZnJvbSBkZWZhdWx0OiBwcm9kdWN0aW9uKVxyXG4gICAgICBjb25zdCBjdXN0b21FbnZpcm9ubWVudCA9IHRvbmljRGl2LmdldEF0dHJpYnV0ZSh0aGlzLmNvbmZpZy5jdXN0b21FbnZpcm9ubWVudClcclxuICAgICAgdGhpcy5jb25maWcuc2V0RW52aXJvbm1lbnQoY3VzdG9tRW52aXJvbm1lbnQgfHwgJ3Byb2R1Y3Rpb24nKVxyXG5cclxuICAgICAgLy8gRmlyZSB0aGUgcmVxdWVzdCB0byBsb2FkIHRoZSB3aWRnZXQgZGF0YVxyXG4gICAgICBjb25zdCBwcm9taXNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgYCR7dGhpcy5jb25maWcuYXBpVXJsfS92MS93aWRnZXRzL2Rpc3BsYXkvJHt3aWRnZXRJZH0/cHJvdmlkZXI9ZW1iZWQtJHt0aGlzLmNvbmZpZy52ZXJzaW9ufWBcclxuICAgICAgKVxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHByb21pc2UuanNvbigpXHJcblxyXG4gICAgICAvLyBGaXJlIGNhbGxiYWNrXHJcbiAgICAgIGNvbnNvbGUubG9nKCdmaXJpbmcgY2FsbGJhY2snKVxyXG4gICAgICB0aGlzLm9wdGlvbnMuV2lkZ2V0UmVxdWVzdENhbGxiYWNrKHJlc3BvbnNlIGFzIFdpZGdldClcclxuXHJcbiAgICAgIC8vIFNldCBVUkkgZW5jb2RlZCB0aXRsZVxyXG4gICAgICBjb25zdCBjYW1wYWlnblRpdGxlID0gZW5jb2RlVVJJQ29tcG9uZW50KHJlc3BvbnNlLnRpdGxlKVxyXG5cclxuICAgICAgLy8gU2V0IHRoZSBIVE1MXHJcbiAgICAgIHRvbmljRGl2LmlubmVySFRNTCA9IGBcclxuICAgIDxhIGhyZWY9XCIke3Jlc3BvbnNlLmxpbmtfdXJsfT91dG1fc291cmNlPXRvbmljcG93LXdpZGdldHMmdXRtX21lZGl1bT13aWRnZXQmdXRtX2NhbXBhaWduPSR7d2lkZ2V0SWR9JnV0bV9jb250ZW50PSR7Y2FtcGFpZ25UaXRsZX1cIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrXCI+XHJcbiAgICAgIDxpbWcgc3JjPVwiJHtyZXNwb25zZS5pbWFnZV91cmx9XCIgXHJcbiAgICAgIGlkPVwiJHt3aWRnZXRJZH1cIlxyXG4gICAgICB3aWR0aD1cIiR7cmVzcG9uc2Uud2lkdGh9XCIgXHJcbiAgICAgIGhlaWdodD1cIiR7cmVzcG9uc2UuaGVpZ2h0fVwiIFxyXG4gICAgICBhbHQ9XCIke3Jlc3BvbnNlLnRpdGxlfVwiIC8+XHJcbiAgICA8L2E+YFxyXG5cclxuICAgICAgLy8gU2V0IGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICAgICAgdG9uaWNEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXdpZHRoJywgcmVzcG9uc2Uud2lkdGgpXHJcbiAgICAgIHRvbmljRGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1oZWlnaHQnLCByZXNwb25zZS5oZWlnaHQpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBMb2FkIHRoZSBUb25pY1BvdyBzY3JpcHQocykgYW5kIGRlZmF1bHQgc2V0dGluZ3NcclxuICBsb2FkID0gKCkgPT4ge1xyXG4gICAgLy8gV2Ugb25seSB3b3JrIGluIGEgYnJvd3NlclxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RvbmljUG93IGVtYmVkIG9ubHkgd29ya3MgaW4gdGhlIGJyb3dzZXInKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2FkIGFsbCB0b25pY3MgZm91bmQgb24gdGhlIHBhZ2UgKGlmIHdlIGhhdmUgZGl2KVxyXG4gICAgY29uc3QgdG9uaWNEaXZzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSh0aGlzLmNvbmZpZy53aWRnZXREaXZDbGFzcylcclxuICAgIGlmICh0b25pY0RpdnMgJiYgdG9uaWNEaXZzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5sb2FkRGl2cygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUb25pY1BvdyB3aWRnZXQocykgbG9hZGVkIScpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJvY2VzcyB2aXNpdG9yIHRva2VuXHJcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5jYXB0dXJlVmlzaXRvclNlc3Npb24oKVxyXG5cclxuICAgIC8vIENhcHR1cmUgZXZlbnRzIGlmIHdlIGhhdmUgYSBzZXNzaW9uXHJcbiAgICBpZiAoc2Vzc2lvbikge1xyXG4gICAgICB0aGlzLmV2ZW50cyA9IG5ldyBFdmVudHMoc2Vzc2lvbilcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIFRPRE8gLSBob3cgdGYgZG8gd2Ugd2UgYXV0b3J1biB0aGlzIG5vdz9cclxuXHJcbi8vIFNldCBvbiB3aW5kb3dcclxuOyh3aW5kb3cgYXMgYW55KS5Ub25pY1BvdyA9IFRvbmljUG93IHx8IHt9XHJcbiIsIi8qIGdsb2JhbCBsb2NhbFN0b3JhZ2UgKi9cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JhZ2Uge1xyXG4gIC8qXHJcbiAgcmVtb3ZlU3RvcmFnZTogcmVtb3ZlcyBhIGtleSBmcm9tIGxvY2FsU3RvcmFnZSBhbmQgaXRzIHNpYmxpbmcgZXhwaXJhY3kga2V5XHJcbiAgcGFyYW1zOlxyXG4gICAgICBrZXkgPHN0cmluZz4gOiBsb2NhbFN0b3JhZ2Uga2V5IHRvIHJlbW92ZVxyXG4gIHJldHVybnM6XHJcbiAgICAgIDxib29sZWFuPiA6IHRlbGxpbmcgaWYgb3BlcmF0aW9uIHN1Y2NlZWRlZFxyXG4gICovXHJcbiAgcmVtb3ZlU3RvcmFnZSA9IChuYW1lOiBzdHJpbmcpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKG5hbWUpXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGAke25hbWV9X2V4cGlyZXNJbmApXHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgIGByZW1vdmVTdG9yYWdlOiBFcnJvciByZW1vdmluZyBrZXkgWyR7bmFtZX1dIGZyb20gbG9jYWxTdG9yYWdlOiAke0pTT04uc3RyaW5naWZ5KGUpfWBcclxuICAgICAgKVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICAvKlxyXG4gIGdldFN0b3JhZ2U6IHJldHJpZXZlcyBhIGtleSBmcm9tIGxvY2FsU3RvcmFnZSBwcmV2aW91c2x5IHNldCB3aXRoIHNldFN0b3JhZ2UoKS5cclxuICBwYXJhbXM6XHJcbiAgICAgIGtleSA8c3RyaW5nPiA6IGxvY2FsU3RvcmFnZSBrZXlcclxuICByZXR1cm5zOlxyXG4gICAgICA8c3RyaW5nPiA6IHZhbHVlIG9mIGxvY2FsU3RvcmFnZSBrZXlcclxuICAgICAgbnVsbCA6IGluIGNhc2Ugb2YgZXhwaXJlZCBrZXkgb3IgZmFpbHVyZVxyXG4gICovXHJcbiAgZ2V0U3RvcmFnZSA9IChrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgLy8gZXBvY2ggdGltZSwgbGV0cyBkZWFsIG9ubHkgd2l0aCBpbnRlZ2VyXHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXHJcblxyXG4gICAgLy8gU2V0IGV4cGlyYXRpb24gZm9yIHN0b3JhZ2VcclxuICAgIGxldCBleHBpcmVzXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgZXhwaXJlcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGAke2tleX1fZXhwaXJlc2ApXHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBnZXRJdGVtOiBlcnJvciBnZXR0aW5nIGxvY2FsU3RvcmFnZTogJHtKU09OLnN0cmluZ2lmeShlKX1gKVxyXG4gICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChleHBpcmVzID09PSB1bmRlZmluZWQgfHwgZXhwaXJlcyA9PT0gbnVsbCkge1xyXG4gICAgICBleHBpcmVzID0gMFxyXG4gICAgfVxyXG5cclxuICAgIC8vIEV4cGlyZWRcclxuICAgIGlmIChleHBpcmVzIDwgbm93KSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlU3RvcmFnZShrZXkpXHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHRoZSBleGlzdGluZyBpdGVtXHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhgZ2V0U3RvcmFnZTogRXJyb3IgcmVhZGluZyBrZXkgWyR7a2V5fV0gZnJvbSBsb2NhbFN0b3JhZ2U6ICR7SlNPTi5zdHJpbmdpZnkoZSl9YClcclxuICAgICAgcmV0dXJuIG51bGxcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qXHJcbiAgc2V0U3RvcmFnZTogd3JpdGVzIGEga2V5IGludG8gbG9jYWxTdG9yYWdlIHNldHRpbmcgYSBleHBpcmUgdGltZVxyXG4gIHBhcmFtczpcclxuICAgICAga2V5IDxzdHJpbmc+ICAgICA6IGxvY2FsU3RvcmFnZSBrZXlcclxuICAgICAgdmFsdWUgPHN0cmluZz4gICA6IGxvY2FsU3RvcmFnZSB2YWx1ZVxyXG4gICAgICBleHBpcmVzIDxudW1iZXI+IDogbnVtYmVyIG9mIHNlY29uZHMgZnJvbSBub3cgdG8gZXhwaXJlIHRoZSBrZXlcclxuICByZXR1cm5zOlxyXG4gICAgICA8Ym9vbGVhbj4gOiB0ZWxsaW5nIGlmIG9wZXJhdGlvbiBzdWNjZWVkZWRcclxuICAqL1xyXG4gIHNldFN0b3JhZ2UgPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGV4cGlyZXM6IG51bWJlciB8IG51bGwgPSBudWxsKSA9PiB7XHJcbiAgICAvLyBFeHBpcmVkIHRpbWVcclxuICAgIGlmIChleHBpcmVzKSB7XHJcbiAgICAgIGV4cGlyZXMgPSBNYXRoLmFicyhleHBpcmVzKSAvLyBtYWtlIHN1cmUgaXQncyBwb3NpdGl2ZVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXhwaXJlcyA9IDI0ICogNjAgKiA2MCAvLyBkZWZhdWx0OiBzZWNvbmRzIGZvciAxIGRheVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1pbGxpIHNlY29uZHMgc2luY2UgZXBvY2ggdGltZSwgbGV0cyBkZWFsIG9ubHkgd2l0aCBpbnRlZ2VyXHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXHJcbiAgICBjb25zdCBzY2hlZHVsZSA9IG5vdyArIGV4cGlyZXMgKiAxMDAwXHJcbiAgICB0cnkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKVxyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHtrZXl9X2V4cGlyZXNgLCBzY2hlZHVsZS50b1N0cmluZygpKVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhgc2V0U3RvcmFnZTogRXJyb3Igc2V0dGluZyBrZXkgWyR7a2V5fV0gaW4gbG9jYWxTdG9yYWdlOiAke0pTT04uc3RyaW5naWZ5KGUpfWApXHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcbn1cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=